<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalvium Livebooks</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Google Font 'Inter' --><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Load Lucide icons --><script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
      // Configure Tailwind to use 'Inter' as the default font
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
          },
        },
      }
    </script>
    
    <style>
      /* Set a default size for lucide icons */
      .lucide {
        width: 1.125rem; /* 18px */
        height: 1.125rem; /* 18px */
      }
    </style>
</head>
<body class="bg-gradient-to-br from-white to-red-50 font-sans min-h-screen">

    <!-- Sticky Navigation Bar --><nav class="bg-white/90 backdrop-blur-sm shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Brand/Logo --><div class="flex-shrink-0 flex items-center">
                    <a href="index.html" class="text-2xl font-bold text-red-600">Kalvium</a>
                    <span class="ml-4 text-gray-400">/</span>
                    <span class="ml-4 text-xl font-semibold text-gray-800">Livebooks</span>
                </div>
                <!-- Right Side - Search and Profile --><div class="flex items-center space-x-4">
                    <button class="p-2 rounded-full text-gray-600 hover:text-red-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        <span class="sr-only">Search</span>
                        <i data-lucide="search" class="w-5 h-5"></i>
                    </button>
                    <button class="p-2 rounded-full text-gray-600 hover:text-red-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        <span class="sr-only">View profile</span>
                        <i data-lucide="user-circle-2" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area --><main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- Sidebar for Semesters --><aside class="lg:col-span-1 bg-white p-6 rounded-2xl shadow-xl shadow-gray-200/60 border border-gray-100 h-fit sticky top-24">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Semesters</h3>
                <nav>
                    <a href="#" class="flex items-center justify-between p-3 rounded-xl bg-red-100 text-red-700 font-medium mb-2 transition-colors hover:bg-red-200">
                        <span>Semester 1</span>
                        <i data-lucide="chevron-right" class="w-4 h-4"></i>
                    </a>
                    <a href="#" class="flex items-center justify-between p-3 rounded-xl text-gray-700 font-medium mb-2 transition-colors hover:bg-gray-100">
                        <span>Semester 2</span>
                        <i data-lucide="chevron-right" class="w-4 h-4"></i>
                    </a>
                    <a href="#" class="flex items-center justify-between p-3 rounded-xl text-gray-700 font-medium mb-2 transition-colors hover:bg-gray-100">
                        <span>Semester 3</span>
                        <i data-lucide="chevron-right" class="w-4 h-4"></i>
                    </a>
                    <a href="#" class="flex items-center justify-between p-3 rounded-xl text-gray-700 font-medium mb-2 transition-colors hover:bg-gray-100">
                        <span>Semester 4</span>
                        <i data-lucide="chevron-right" class="w-4 h-4"></i>
                    </a>
                    <a href="#" class="flex items-center justify-between p-3 rounded-xl text-gray-700 font-medium mb-2 transition-colors hover:bg-gray-100">
                        <span>Semester 5</span>
                        <i data-lucide="chevron-right" class="w-4 h-4"></i>
                    </a>
                    <a href="#" class="flex items-center justify-between p-3 rounded-xl text-gray-700 font-medium mb-2 transition-colors hover:bg-gray-100">
                        <span>Semester 6</span>
                        <i data-lucide="chevron-right" class="w-4 h-4"></i>
                    </a>
                </nav>
            </aside>

            <!-- Main Livebooks Content --><div class="lg:col-span-3">
                
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Semester 1</h2>
                
                <!-- All cards will now appear in this single grid -->
                <div id="livebook-cards-container" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

                    <!-- Livebook Card Template -->
                    <!-- UPDATED: The template is now an anchor <a> tag with dynamic [href] and [target] -->
                    <script type="text/template" id="livebook-card-template">
                        <a href="[href]" target="[target]" class="block transition-all duration-300 ease-in-out hover:shadow-2xl hover:-translate-y-1">
                            <div class="bg-white p-5 rounded-xl shadow-xl shadow-gray-200/60 border border-gray-100 h-full flex flex-col">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="w-10 h-10 flex items-center justify-center rounded-lg bg-[iconBgClass] text-[iconColorClass]">
                                        <i data-lucide="[icon]"></i>
                                    </div>
                                    <button class="p-1 -m-1 rounded-full transition-colors [bookmarkClass]" onclick="toggleBookmark(event, '[title]')">
                                        <i data-lucide="bookmark" class="w-5 h-5 [iconFillClass]"></i>
                                    </button>
                                </div>
                                <h3 class="text-base font-semibold text-gray-800 mb-1">[title]</h3>
                                <p class="text-sm text-gray-500 mb-4 flex-grow">[description]</p>
                                
                                <!-- Progress Bar --><div class="w-full bg-gray-200 rounded-full h-2 mb-4">
                                    <div class="bg-red-500 h-2 rounded-full" style="width: [progress]%;"></div>
                                </div>
                                <div class="flex items-center justify-between text-xs text-gray-600">
                                    <div class="flex items-center space-x-3">
                                        <span class="flex items-center gap-1">
                                            <i data-lucide="book" class="w-4 h-4 text-gray-400"></i> [read]
                                        </span>
                                        <span class="flex items-center gap-1">
                                            <i data-lucide="layers" class="w-4 h-4 text-gray-400"></i> [projects]
                                        </span>
                                        <span class="flex items-center gap-1">
                                            <i data-lucide="check-circle" class="w-4 h-4 text-gray-400"></i> [completed]
                                        </span>
                                    </div>
                                    <span class="font-semibold text-red-600">[progress]%</span>
                                </div>
                            </div>
                        </a>
                    </script>

                </div>
            </div>
        </div>
    </main>

    <!-- Script to initialize Lucide icons and load content --><script>
        // UPDATED: Added href and target properties to each object
        const livebookData = [
            {
                title: "Introduction to Prompt Engineering",
                description: "Understanding the fundamentals of effective prompt creation.",
                icon: "sparkles",
                iconBgClass: "bg-purple-100",
                iconColorClass: "text-purple-600",
                read: 0,
                projects: 30,
                completed: 1,
                progress: 0,
                href: '#',
                target: '_blank'
            },
            {
                title: "Front-End Web Development - Fundamentals",
                description: "HTML, CSS, and basic JavaScript for web interfaces.",
                icon: "code",
                iconBgClass: "bg-green-100",
                iconColorClass: "text-green-600",
                read: 0,
                projects: 68,
                completed: 4,
                progress: 10,
                href: 'fewd.html', // Specific link
                target: '_self' // Opens in the same tab
            },
            {
                title: "Problem Solving Using Programming - Fundamentals",
                description: "Core algorithms and data structures.",
                icon: "brain",
                iconBgClass: "bg-blue-100",
                iconColorClass: "text-blue-600",
                read: 4,
                projects: 75,
                completed: 4,
                progress: 47,
                href: '#',
                target: '_blank'
            },
            {
                title: "The Breadth of Computer Science - I",
                description: "An overview of various computer science domains.",
                icon: "atom",
                iconBgClass: "bg-yellow-100",
                iconColorClass: "text-yellow-600",
                read: 4,
                projects: 45,
                completed: 2,
                progress: 22,
                href: '#',
                target: '_blank'
            },
            {
                title: "Design for Developers",
                description: "Principles of good design for software engineers.",
                icon: "palette",
                iconBgClass: "bg-pink-100",
                iconColorClass: "text-pink-600",
                read: 3,
                projects: 65,
                completed: 0,
                progress: 0,
                href: '#',
                target: '_blank'
            },
            {
                title: "Professional Skills for the Workplace",
                description: "Essential soft skills for career success.",
                icon: "briefcase",
                iconBgClass: "bg-red-100",
                iconColorClass: "text-red-600",
                read: 5,
                projects: 31,
                completed: 1,
                progress: 36,
                href: '#',
                target: '_blank'
            },
            {
                title: "Critical Thinking 101",
                description: "Develop analytical and problem-solving abilities.",
                icon: "message-circle",
                iconBgClass: "bg-orange-100",
                iconColorClass: "text-orange-600",
                read: 4,
                projects: 49,
                completed: 0,
                progress: 24,
                href: '#',
                target: '_blank'
            },
            {
                title: "Free and Open Source Software",
                description: "Exploring the world of FOSS and its community.",
                icon: "box",
                iconBgClass: "bg-teal-100",
                iconColorClass: "text-teal-600",
                read: 0,
                projects: 14,
                completed: 0,
                progress: 0,
                href: '#',
                target: '_blank'
            },
            {
                title: "Developing Agents Using GenAI",
                description: "Building intelligent agents with generative AI.",
                icon: "bot",
                iconBgClass: "bg-indigo-100",
                iconColorClass: "text-indigo-600",
                read: 0,
                projects: 35,
                completed: 0,
                progress: 0,
                href: '#',
                target: '_blank'
            },
            {
                title: "Graduation to Adulthood",
                description: "Preparing for life after graduation.",
                icon: "graduation-cap",
                iconBgClass: "bg-lime-100",
                iconColorClass: "text-lime-600",
                read: 0,
                projects: 24,
                completed: 0,
                progress: 20,
                href: '#',
                target: '_blank'
            },
            {
                title: "Kalvium Student Handbook",
                description: "Your guide to Kalvium policies and resources.",
                icon: "library",
                iconBgClass: "bg-blue-100",
                iconColorClass: "text-blue-600",
                read: 0,
                projects: 19,
                completed: 0,
                progress: 0,
                href: '#',
                target: '_blank'
            },
            {
                title: "Aptitude",
                description: "Sharpening your quantitative and logical reasoning skills.",
                icon: "target",
                iconBgClass: "bg-yellow-100",
                iconColorClass: "text-yellow-600",
                read: 0,
                projects: 42,
                completed: 0,
                progress: 0,
                href: '#',
                target: '_blank'
            },
            {
                title: "Introduction to Problem Solving for Programming",
                description: "Foundational concepts for coding challenges.",
                icon: "lightbulb",
                iconBgClass: "bg-pink-100",
                iconColorClass: "text-pink-600",
                read: 0,
                projects: 47,
                completed: 0,
                progress: 0,
                href: '#',
                target: '_blank'
            },
            {
                title: "Java 101",
                description: "Basic programming in Java.",
                icon: "coffee",
                iconBgClass: "bg-red-100",
                iconColorClass: "text-red-600",
                read: 0,
                projects: 14,
                completed: 0,
                progress: 0,
                href: '#',
                target: '_blank'
            }
        ];

        const semesterContainer = document.getElementById('livebook-cards-container');
        const template = document.getElementById('livebook-card-template').innerHTML;

        // --- Bookmark Functions ---

        function getBookmarkedTitles() {
            const bookmarks = localStorage.getItem('bookmarkedLivebooks');
            return bookmarks ? JSON.parse(bookmarks) : [];
        }

        function saveBookmarkedTitles(titles) {
            localStorage.setItem('bookmarkedLivebooks', JSON.stringify(titles));
        }

        window.toggleBookmark = (event, title) => {
            // Prevent event from bubbling up (e.g., if card becomes a link)
            event.stopPropagation();
            event.preventDefault();
            
            const bookmarkedTitles = getBookmarkedTitles();
            const index = bookmarkedTitles.indexOf(title);
            
            if (index > -1) {
                // Already bookmarked, remove it
                bookmarkedTitles.splice(index, 1);
            } else {
                // Not bookmarked, add it
                bookmarkedTitles.push(title);
            }
            
            saveBookmarkedTitles(bookmarkedTitles);
            renderCards(); // Re-render all cards
        }

        // --- Render Function ---

        function renderCards() {
            const bookmarkedTitles = getBookmarkedTitles();
            
            // Clear the main container
            semesterContainer.innerHTML = '';
            
            let bookmarkedHtml = '';
            let semesterHtml = '';
            
            livebookData.forEach(data => {
                const isBookmarked = bookmarkedTitles.includes(data.title);
                
                // Escape title for use in HTML attribute
                const escapedTitle = JSON.stringify(data.title);

                // Set icon style based on bookmark state
                const bookmarkClass = isBookmarked ? 'text-red-500' : 'text-gray-400 hover:text-red-500';
                const iconFillClass = isBookmarked ? 'fill-red-500' : '';

                // Populate the template
                let cardHtml = template
                    // 1. FIRST, specifically replace the onclick placeholder with the escaped title
                    .replace('onclick="toggleBookmark(event, \'[title]\')"', `onclick='toggleBookmark(event, ${escapedTitle})'`) 
                    
                    // 2. NOW, replace the visible H3 title placeholder
                    .replace('[title]', data.title) 
                    
                    // 3. ... all other replaces
                    .replace('[href]', data.href) // Replaces the href
                    .replace('[target]', data.target) // Replaces the target
                    .replace('[description]', data.description)
                    .replace('[icon]', data.icon)
                    .replace('[iconBgClass]', data.iconBgClass)
                    .replace('[iconColorClass]', data.iconColorClass)
                    .replace('[read]', data.read)
                    .replace('[projects]', data.projects)
                    .replace('[completed]', data.completed)
                    .replace(/\[progress\]/g, data.progress)
                    .replace('[bookmarkClass]', bookmarkClass)
                    .replace('[iconFillClass]', iconFillClass);
                
                // Append card HTML to the correct string
                if (isBookmarked) {
                    bookmarkedHtml += cardHtml;
                } else {
                    semesterHtml += cardHtml;
                }
            });
            
            // Combine the strings, with bookmarked items first, and set the container HTML
            semesterContainer.innerHTML = bookmarkedHtml + semesterHtml;
            
            // Re-create Lucide icons after dynamic content is added
            lucide.createIcons();
        }

        // Initial render on page load
        renderCards();
    </script>
</body>
</html>
